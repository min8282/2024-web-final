{% extends 'layout.html' %}

{% block content %}
<div class="post-detail-container">
  <h1>{{ post.title }}</h1>
  <div class="post-images">
    {% for imageUrl in imageUrls %}
      <img src="{{ imageUrl }}" class="post-image" alt="{{ post.title }}">
    {% endfor %}
  </div>
  <div class="post-info">
    <h2>가격정보</h2>
    <p>가격: {{ post.price }}</p>
    <h2>위치정보</h2>
    <p>{{ post.location }}</p>
    <h2>상세설명</h2>
    <p>{{ post.description }}</p>
    <h2>작성자 정보</h2>
    <p>{{ post.User.nick }}</p>
    <button id="show-contact" class="contact-btn" data-user-id="{{ post.User.id }}">연락처 보기</button> <!-- 수정된 부분 -->

    {% if user %}
      <button class="like-button {% if liked %}liked{% endif %}" data-post-id="{{ post.id }}">
        {% if liked %}
          좋아요 취소
        {% else %}
          좋아요
        {% endif %}
      </button>
    {% endif %}

    {% if user and user.id == post.UserId %}
      <div class="post-actions">
        <a href="/post/{{ post.id }}/edit" class="btn">수정하기</a>
        <form action="/post/{{ post.id }}/delete" method="post" onsubmit="return confirm('정말 삭제하시겠습니까?');">
          <button type="submit" class="btn">삭제하기</button>
        </form>
      </div>
    {% endif %}
  </div>
</div>

<!-- 연락처 보기 모달 -->
<div id="contact-modal" class="modal">
  <div class="modal-content">
    <span class="close">&times;</span>
    <h2>연락처 정보</h2>
    <p id="contact-nick">이름: {{ post.User.nick }}</p>
    <p id="contact-phone">연락처: {{ post.User.contact }}</p>
  </div>
</div>
{% endblock %}
